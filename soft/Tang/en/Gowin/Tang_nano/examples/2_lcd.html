<!DOCTYPE html>

<html lang="en"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/prism.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?9cb07365544a53067c56c346c838181a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119047820-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-119047820-5');
    </script>
        
        <link rel="stylesheet" href="/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/js/thumbs_up/style.css" type="text/css"/>
        
    
    
    <title>Sipeed Wiki</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"type": "hint", "label": "NEW", "content": "New Maix series products <a href='https://wiki.sipeed.com/maixcam'>MaixCAM</a> online now, and new <a href='https://wiki.sipeed.com/maixpy/'>MaixPy</a>,feature richer functionalities, enhanced performance, and user-friendly software, with comprehensive documentation", "show_times": 2, "show_after_s": 432000, "date": "2022-06-01 14:00", "color": "#a0421d", "link_color": "#e53935", "link_bg_color": "#e6ae5c", "bg_color": "#ffcf89", "color_hover": "white", "bg_color_hover": "#f57c00", "close_color": "#eab971"}, "teedoc-plugin-thumbs-up": {"label_up": "Helpful", "label_down": "Not Helpful", "icon": "/static/images/thumbs_up/up.svg", "icon_clicked": "/static/images/thumbs_up/upped.svg", "url": "https://thumbs-up.sipeed.com", "show_up_count": true, "show_down_count": false, "msg_already_voted": "You have already voted", "msg_thanks": "Thanks for your vote", "msg_down_prompt": "Thanks to tell us where we can improve?(At least 10 characters)", "msg_down_prompt_error": "Message should be at least 10 characters and less than 256 characters", "msg_error": "Request server failed!"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/en/">
                
                    <img class="site_logo" src="/static/image/logo.svg" alt="sipeed wiki logo">
                
                
                    <h2>wiki</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/en/">Products</a></li>
<li class="sub_items "><a >Software Docs</a><ul><li class=""><a  href="/maixpy/en/">MaixPy</a></li>
<li class=""><a  href="/soft/maixpy/zh/index.html">MaixPy_v1</a></li>
<li class=""><a  href="/soft/Lichee/zh/index.html">Lichee</a></li>
<li class=""><a  href="/ai/en/index.html">AI Guide</a></li>
</ul>
</li>
<li class=""><a target="_blank" href="https://maixhub.com">MaixHub</a></li>
<li class=""><a  href="/news/">News</a></li>
<li class=""><a  href="/en/faq.html">FAQ</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a  href="/en/store.html"><img src='/static/image/shop.svg' style='height: 1.5em;vertical-align: middle;'></a></li>
<li class=""><a target="_blank" href="https://github.com/sipeed"><img src='/static/image/github.svg' style='height: 1.5em;vertical-align: middle;'></a></li>
<li class="sub_items "><a  ><img src='/static/image/language.svg' style='height: 1.5em;vertical-align: middle;'>&nbsp;English</a><ul><li class="active"><a  href="/soft/Tang/en/Gowin/Tang_nano/examples/2_lcd.html">English</a></li>
<li class=""><a  href="/soft/Tang/zh/Gowin/Tang_nano/examples/2_lcd.html">中文</a></li>
</ul></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">Search</span>
                            <div id="search_hints">
                                <span id="search_input_hint">Input keyword. Using Space to separate multiple keywords</span>
                                <span id="search_loading_hint">Loading, please wait</span>
                                <span id="search_download_err_hint">Fail download, Please retry or check network</span>
                                <span id="search_other_docs_result_hint">Results form other doc</span>
                                <span id="search_curr_doc_result_hint">Result form current doc</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="active_parent with_link"><a href="/soft/Tang/en/index.html"><span class="label">Tang</span><span class="sub_indicator"></span></a><ul class="show">
<li class="active_parent no_link"><a><span class="label">Tang Nano</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active no_link"><a><span class="label">INTRODUCTION</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Gowin/Tang_nano/index.html"><span class="label">About Tang Nano</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">REDAY</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Gowin/Tang_nano/get_started/install-the-ide.html"><span class="label">IDE installation</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">EXAMPLE</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/soft/Tang/en/Gowin/Tang_nano/examples/1_led.html"><span class="label">Lighting tutorial</span><span class=""></span></a></li>
<li class="active with_link"><a href="/soft/Tang/en/Gowin/Tang_nano/examples/2_lcd.html"><span class="label">Point LCD tutorial</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active with_link"><a href="/soft/Tang/en/Gowin/Tang_nano_1k/Wait.html"><span class="label">Tang nano 1k</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Gowin/Tang_nano_4k/Wait.html"><span class="label">Tang nano 4k</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Gowin/Tang_nano_9k/Wait.html"><span class="label">Tang nano 9k</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Tang Primer</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/index.html"><span class="label">Tang Primer</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Hardware Overview</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/hardware-overview/lichee-tang.html"><span class="label">Tang Primer board</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/hardware-overview/OV2640-camera.html"><span class="label">OV2640 Camera Module</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/hardware-overview/LCD-display.html"><span class="label">LCD Display module</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/no_translate.html?ref=/soft/Tang/zh/Analogic/Tang_primer/hardware-overview/rV-debugger.html&from=/soft/Tang/en/Analogic/Tang_primer/hardware-overview/rV-debugger.html"><span class="label">RV Debugger</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Getting Started</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/getting-started/requirements.html"><span class="label">Requirements</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/getting-started/installing-TD-IDE/linux.html"><span class="label">Installing Tang Dynasty IDE on Linux</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/getting-started/installing-TD-IDE/windows.html"><span class="label">Installing Tang Dynasty IDE on Windows</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/getting-started/installing-USB-Driver/linux.html"><span class="label">Installing USB Driver on Linux</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/getting-started/installing-USB-Driver/windows.html"><span class="label">Installing USB Driver on Windows</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/getting-started/Getting-to-Blinky/Getting-to-Blinky.html"><span class="label">Getting to Blinky</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Using Tang Perimer</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/using-tang/using-gpio/using-gpio.html"><span class="label">Using Tang GPIO</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Working with RISC-V</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/risc-v-core/hummingbird/_index.en.html"><span class="label">Hummingbrid Core</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Developer Guide</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Tang/en/Analogic/Tang_primer/dev-guide/using-yosys/_index.en.html"><span class="label">Using Yosys with Primer</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1></h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="Last modify date: 2022-07-06">
                                    2022-07-06
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/sipeed/sipeed_wiki/blob/main/docs/soft/Tang/en/Gowin/Tang_nano/examples/2_lcd.md" target="_blank">
                                    <span id='editPage'>Edit this page</span>
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <p>RGB LCD example</p>
<h1 id="Introduce-timing-first">Introduce timing first</h1>
<p>The principle of RGB LCD display image is similar to that of VGA. It is to digitally generate the image information to be displayed inside the computer, and then convert the image information of these numbers into RGB three primary color analog signals through analog-to-digital conversion. Field sync signal.</p>
<p>The timing of VGA is introduced below.</p>
<p><img src="./../assets/examples/lcd_pjt_1.png" alt="" /></p>
<p>The above figure is the line synchronization and field synchronization timing of VGA in data transmission.</p>
<p>As can be seen from the timing diagram, whether a line of data or a column of data is required, a synchronization (sync) signal is required, and the transmission of data needs to be completed between the pulses of the two synchronization signals.</p>
<p>The data for each line includes the back porch, active viedo, and front porch.</p>
<p>The valid data is the resolution we often say, and the parameters of the leading and trailing edges need to be set with reference to the specific resolution and number of frames. The relevant parameters can refer to the typical parameters, and the link is here: <a href="http://www.tinyvga.com"  target="_blank">http://www.tinyvga.com</a> /vga-timing</p>
<p>The control timing of this screen is slightly different. You can view the [Specifications] (../../assets/files/AT050TN43.pdf)</p>
<p>Screenshots of LCD related timing are provided below</p>
<p><img src="./../assets/examples/lcd_pjt_2.png" alt="" /></p>
<p><img src="./../assets/examples/lcd_pjt_3.png" alt="" /></p>
<p>The above picture is the parameter table in the timing, and the following picture is the timing chart.</p>
<p>As seen from the timing diagram, this screen can be set without the front and rear edges, and only the blanking time can be set. It can be proved by the actual program that both methods are possible.</p>
<h1 id="Verilog-implementation">Verilog implementation</h1>
<h2 id="1.pll">1.pll</h2>
<p>The onboard crystal clock is 24MHz, but our screen requires a 33.3MHZ clock, so we need to use pll to generate the clock we need.</p>
<p>Need to use <code>IP Core Generate</code> here, located in Tools -&gt; IP Core Generate</p>
<p><img src="./../assets/examples/lcd_pjt_4.png" alt="" /></p>
<p>Double-click <code>PLL</code>, select Verilog in the pop-up window language, CLKIN is 24MHz, CLKOUT is 200MHz, CLKOUTD should select Enable, then generate clock is 33.33MHz, Tolerance selects 0.2%</p>
<p><img src="./../assets/examples/lcd_pjt_5.png" alt="" /></p>
<h2 id="2.osc">2.osc</h2>
<p>The system clock can be provided by an external clock or by using an OSC generated clock.</p>
<p>Also use <code>IP Core Generate</code></p>
<p>Find <code>OSC</code> and double-click to open the settings for crossover.</p>
<p>As you can see on the help page, the OSC of the GW1N-1 series fpga is divided from 240MHz, so to generate a 24MHz clock, only need to divide by 10</p>
<h2 id="3.lcd-timing-generation">3.lcd timing generation</h2>

<pre class="language-none"><code class="language-none">localparam V_BackPorch = 16'd6; //0 or 45
localparam V_Pluse = 16'd5;
localparam HightPixel = 16'd480;
localparam V_FrontPorch= 16'd62; //45 or 0

localparam H_BackPorch = 16'd182; //NOTE: When the high pixel clock is used, increase the delay here to facilitate the K210 to join the interrupt.
localparam H_Pluse = 16'd1;
localparam WidthPixel = 16'd800;
localparam H_FrontPorch= 16'd210;

localparam PixelForHS = WidthPixel + H_BackPorch + H_FrontPorch;
localparam LineForVS = HightPixel + V_BackPorch + V_FrontPorch;
</code></pre>
<p>The first is to set the timing related parameters: leading edge, trailing edge, effective pixels</p>
<p>Regarding the display leading edge and trailing edge, as mentioned earlier, it can be combined into one erasing time, that is, one can be set to 0 and the other to the erasing time. Anyway, the time between the front and the back adds up to meet the time requirements in the table.</p>

<pre class="language-none"><code class="language-none">always @( posedge PixelClk or negedge nRST ) begin
    if( !nRST ) begin
        LineCount &lt;= 16'b0;
        PixelCount &lt;= 16'b0;
        end
    else if( PixelCount == PixelForHS ) begin
        PixelCount &lt;= 16'b0;
        LineCount &lt;= LineCount + 1'b1;
        end
    else if( LineCount == LineForVS ) begin
        LineCount &lt;= 16'b0;
        PixelCount &lt;= 16'b0;
        end
end

/ / Note the HSYNC and VSYNC negative polarity here
assign LCD_HSYNC = (( PixelCount &gt;= H_Pluse)&amp;&amp;( PixelCount &lt;= (PixelForHS-H_FrontPorch))) 1'b0 : 1'b1;
assign LCD_VSYNC = ((( LineCount &gt;= V_Pluse )&amp;&amp;( LineCount &lt;= (LineForVS-0) )) ) ) 1'b0 : 1'b1;
</code></pre>
<p>This code generates a sync signal. It should be noted that the sync signal of this screen is negative polarity enabled.</p>

<pre class="language-none"><code class="language-none">assign LCD_DE = ( ( PixelCount &gt;= H_BackPorch )&amp;&amp;
                    ( PixelCount &lt;= PixelForHS-H_FrontPorch ) &amp;&amp;
                    ( LineCount &gt;= V_BackPorch ) &amp;&amp;
                    ( LineCount &lt;= LineForVS-V_FrontPorch-1 )) ? 1'b1 : 1'b0;
                    //This is not minus one, it will shake
</code></pre>
<p>This code sets the LCD to enable image display. This screen needs to control one pin to be used as a display switch. The actual signal is set when the 800*480 data is valid for transmitting images.</p>

<pre class="language-none"><code class="language-none">assign LCD_R = (PixelCount&lt;200)? 5'b00000 :
                    (PixelCount&lt;240 ? 5'b00001 :
                    (PixelCount&lt;280 ? 5'b00010 :
                    (PixelCount&lt;320 ? 5'b00100 :
                    (PixelCount&lt;360 ? 5'b01000 :
                    (PixelCount&lt;400 ? 5'b10000 : 5'b00000 )))));

assign LCD_G = (PixelCount&lt;400)? 6'b000000 :
                    (PixelCount&lt;440 ? 6'b000001 :
                    (PixelCount&lt;480 ? 6'b000010 :
                    (PixelCount&lt;520 ? 6'b000100 :
                    (PixelCount&lt;560 ? 6'b001000:
                    (PixelCount&lt;600 ? 6'b010000:
                    (PixelCount&lt;640 ? 6'b100000 : 6'b000000 ))))));

assign LCD_B = (PixelCount&lt;640)? 5'b00000 :
                    (PixelCount&lt;680 ? 5'b00001 :
                    (PixelCount&lt;720 ? 5'b00010 :
                    (PixelCount&lt;760 ? 5'b00100 :
                    (PixelCount&lt;800 ? 5'b01000 :
                    (PixelCount&lt;840 ? 5'b10000 : 5'b00000 )))));
</code></pre>
<p>This code is used to generate test data for the LCD to produce a color bar display.</p>

<pre class="language-none"><code class="language-none">VGAMod D1
(
    .CLK ( CLK_SYS ),
    .nRST ( nRST ),

    .PixelClk ( CLK_PIX ),
    .LCD_DE ( LCD_DEN ),
    .LCD_HSYNC ( LCD_HYNC ),
    .LCD_VSYNC ( LCD_SYNC ),

    .LCD_B ( LCD_B ),
    .LCD_G ( LCD_G ),
    .LCD_R ( LCD_R )
);
</code></pre>
<p>Finally, instantiate in TOP</p>
<p>The entire project can be found at <a href="https://github.com/sipeed/Tang-Nano-examples/tree/master/example_lcd"  target="_blank">https://github.com/sipeed/Tang-Nano-examples/tree/master/example_lcd</a>download</p>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/soft/Tang/en/Gowin/Tang_nano/examples/1_led.html">
                            <span class="icon"></span>
                            <span class="label">Lighting tutorial</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/soft/Tang/en/Gowin/Tang_nano_1k/Wait.html">
                            <span class="label">Tang nano 1k</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>links</a><ul><li><a target="_blank" href="https://www.sipeed.com">Sipeed</a></li>
<li><a target="_blank" href="https://maixhub.com/">MaixHub</a></li>
<li><a target="_blank" href="https://sipeed.aliexpress.com/store/911876460">Sipeed AliExpress</a></li>
<li><a target="_blank" href="https://github.com/neutree/teedoc">Build by teedoc </a></li>
</ul>
</li>
<li><a>Source Code</a><ul><li><a target="_blank" href="https://github.com/sipeed/sipeed_wiki">Wiki source</a></li>
<li><a target="_blank" href="https://github.com/sipeed">Open Source Projects</a></li>
</ul>
</li>
<li><a>Follow us</a><ul><li><a target="_blank" href="https://twitter.com/SipeedIO">twitter</a></li>
<li><a target="_blank" href="https://sipeed.aliexpress.com/store/911876460">AliExpress</a></li>
<li><a target="_blank" href="https://github.com/sipeed">github</a></li>
<li><a><a>Wechat</a><img src='/static/image/wechat.png'></a>
</li>
</ul>
</li>
<li><a>Contact us</a><ul><li><a>Tel: +86 0755-27808509</a>
</li>
<li><a>Business support: support@sipeed.com</a>
</li>
<li><a>Address: 深圳市宝安区新湖路4008号蘅芳科技办公大厦A座-2101C</a>
</li>
<li><a  href="/join_us.html">Join us</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://www.sipeed.com">©2018-2023 深圳矽速科技有限公司</a></li>
<li><a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">粤ICP备19015433号</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "translate.google.com";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                    console.log("load google translate domain from local storage:" + domain);
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                console.log("google translate domain:" + domain + ", url: " + url);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/static/js/plugin_blog/main.js"></script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/js/prism.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/static/js/gitalk/main.js"></script>
    
        <link rel="stylesheet" href="/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/static/js/add_hint/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
        <script src="/static/js/thumbs_up/main.js"></script>
    
</body>

</html>