<!DOCTYPE html>

<html lang="zh"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="LicheeRV, SPI, RISCV, D1">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/prism.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?9cb07365544a53067c56c346c838181a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119047820-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-119047820-5');
    </script>
        
        <link rel="stylesheet" href="/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/js/thumbs_up/style.css" type="text/css"/>
        
    
    
    <title>使用 LicheeRV 86 Panel 与 Tina BSP 实现 RGB 与 SPI 双屏显示 - Sipeed Wiki</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"type": "hint", "label": "NEW", "content": "全新 Maix 系列产品 <a href='https://wiki.sipeed.com/maixcam'>MaixCAM</a> 已上线, 全新 <a href='https://wiki.sipeed.com/maixpy/'>MaixPy</a> 功能更丰富，性能更强大，软件更易用，文档更全面！", "show_times": 2, "show_after_s": 432000, "date": "2022-06-01 14:00", "color": "#a0421d", "link_color": "#e53935", "link_bg_color": "#e6ae5c", "bg_color": "#ffcf89", "color_hover": "white", "bg_color_hover": "#f57c00", "close_color": "#eab971"}, "teedoc-plugin-thumbs-up": {"label_up": "有帮助", "label_down": "待改进", "icon": "/static/images/thumbs_up/up.svg", "icon_clicked": "/static/images/thumbs_up/upped.svg", "url": "https://thumbs-up.sipeed.com", "show_up_count": true, "show_down_count": false, "msg_already_voted": "您已经投过票了", "msg_thanks": "感谢您的反馈", "msg_down_prompt": "感谢反馈，请告诉我们可以改进什么地方?（最少 10 个字）", "msg_down_prompt_error": "消息最少需要 10 个字， 最多 256 个字", "msg_error": "请求服务器出现错误!"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": false, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/">
                
                    <img class="site_logo" src="/static/image/logo.svg" alt="sipeed wiki logo">
                
                
                    <h2>wiki</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/">产品</a></li>
<li class="sub_items active_parent"><a >开源软件</a><ul><li class=""><a  href="/maixpy/">MaixPy</a></li>
<li class=""><a  href="/soft/maixpy/zh/index.html">MaixPy_v1</a></li>
<li class="active"><a  href="/soft/Lichee/zh/index.html">Lichee</a></li>
<li class=""><a  href="/ai/zh/index.html">AI 指南</a></li>
</ul>
</li>
<li class=""><a target="_blank" href="https://maixhub.com">MaixHub</a></li>
<li class=""><a  href="/news/">动态</a></li>
<li class=""><a  href="/faq.html">FAQ 汇总</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a  href="/store.html"><img src='/static/image/shop.svg' style='height: 1.5em;vertical-align: middle;'></a></li>
<li class=""><a target="_blank" href="https://github.com/sipeed"><img src='/static/image/github.svg' style='height: 1.5em;vertical-align: middle;'></a></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">搜索</span>
                            <div id="search_hints">
                                <span id="search_input_hint">输入关键词，多关键词空格隔开</span>
                                <span id="search_loading_hint">正在加载，请稍候。。。</span>
                                <span id="search_download_err_hint">下载文件失败，请刷新重试或检查网络</span>
                                <span id="search_other_docs_result_hint">来自其它文档的结果</span>
                                <span id="search_curr_doc_result_hint">当前文档搜索结果</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/soft/Lichee/zh/linux/start/introduction.html"><span class="label">Linux 简介</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">bootloader(施工中)</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Kernel(施工中)</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">rootfs(施工中)</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">application(施工中)</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Start/board_intro.html"><span class="label">LicheePI Zero</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">初来乍到</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Start/intro_cn.html"><span class="label">荔枝派与创作者的自我介绍</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Start/tips.html"><span class="label">Linux使用小贴士</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">上手使用</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">Zero系统烧录</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/download_onekey.html"><span class="label">Windows下镜像烧录</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/download_dd.html"><span class="label">Linux下镜像烧录</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/download_SPI.html"><span class="label">SPI Flash系统烧录</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Start/docker_index.html"><span class="label">Docker环境简明教程</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Start/docker_env.html"><span class="label">Docker开发环境</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Start/docker_command.html"><span class="label">Docker命令速查</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Start/docker_ubuntu.html"><span class="label">基础ubuntu系统配置</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">系统开发</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/type.html"><span class="label">Zero的开发环境分类</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">主线Uboot</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/uboot_build.html"><span class="label">Uboot 编译</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/uboot_conf.html"><span class="label">Uboot 配置</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/uboot_logo.html"><span class="label">开机logo替换</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">主线Kernel</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/kernel_build.html"><span class="label">主线Kernel基础编译</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/kernel_printk.html"><span class="label">内核printk等级设置</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">BSP内核编译</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/bsp_build.html"><span class="label">BSP源码下载与编译</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/bsp_review.html"><span class="label"> BSP内核构建走读</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/bsp_cam.html"><span class="label">BSP内核的摄像头使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/bsp_mem.html"><span class="label">bsp内核中的保留内存</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">根文件系统编译</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/buildroot.html"><span class="label">buildroot根文件系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/emdebian.html"><span class="label">emdebian根文件系统</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">SPI系统介绍</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/SPI_flash_build.html"><span class="label">SPI-Flash系统编译</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/SPI_falsh_doc1.html"><span class="label">sunxi-fel增加对16M以上Flash的支持</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/SPI_falsh_doc2.html"><span class="label">overlayfs的使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/SPI_falsh_doc3.html"><span class="label">jffs2文件系统挂载不上的常见原因</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/SPI_falsh_doc4.html"><span class="label">JFFS2文件系统简介</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/SPI_falsh_doc5.html"><span class="label">uboot 对SPI flash 的识别</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/SPI_falsh_doc6.html"><span class="label">关于系统reboot</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/System_Development/Imager.html"><span class="label">Zero Imager</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">驱动开发</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/Device_Tree_Intro.html"><span class="label">设备树简介</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">外设适配</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">GPIO操作</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/GPIO_file.html"><span class="label">文件IO方式操作</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/GPIO_mmap.html"><span class="label">C语言方式(mmap)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/GPIO_libgpiod.html"><span class="label">C语言方式(libgpiod)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/GPIO_py.html"><span class="label">Python 操作GPIO</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/uboot_GPIO.html"><span class="label">uboot下gpio操作</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/UART.html"><span class="label"> UART操作</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/I2C.html"><span class="label">I2C操作</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/PWM.html"><span class="label">PWM输出</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/CODEC.html"><span class="label">CODEC的使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/Ethernet.html"><span class="label">以太网使用指南</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">设备驱动</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/GPUandDRM.html"><span class="label">GPU/DRM驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/atmel_touch.html"><span class="label">atmel触摸屏驱动分析</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/atmel_inter.html"><span class="label">atmel触摸屏中断改轮询</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/watchdog.html"><span class="label">看门狗的使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/RGB_LCD.html"><span class="label">点屏之RGB屏</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Drive/SPI_LCD.html"><span class="label">点屏之SPI屏</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">应用开发</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/autorun.html"><span class="label">开机自启动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/debug.html"><span class="label">Segment Fault调试</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/otg2PC.html"><span class="label">Zero通过otg与PC共享网络</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/USB_cam.html"><span class="label">USB摄像头使用</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">基于QT的GUI开发</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc1.html"><span class="label">移植tslib</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc2.html"><span class="label">移植QT5.9.1</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc3.html"><span class="label">移植QT4.8.7</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc4.html"><span class="label">QtCreator使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc5.html"><span class="label">Qt5.x移植到Qt4.8</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc6.html"><span class="label">Qt字体相关</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc7.html"><span class="label">Qt移植总结</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc8.html"><span class="label">Qt裁剪</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/application/QT_doc9.html"><span class="label">Qt去除鼠标指针显示</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">贡献投稿</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">投稿文章精选</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_1.html"><span class="label">荔枝派zero开箱指南</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_2.html"><span class="label">Zero i2c oled使用指南</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_3.html"><span class="label">Lichee Pi zero SPI LCD使用指南</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_4.html"><span class="label">Zero u-boot编译和使用指南</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_5.html"><span class="label">TF WiFi使用方法</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_6.html"><span class="label">Licheepi Zero Ethernet适配指南</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_7.html"><span class="label">Qt5 移植到 licheepi zero</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_8.html"><span class="label">Zero Spi Nor Flash启动系统制作指南</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_10.html"><span class="label">lichee 编译踩坑记录(ilichee ZERO)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Zero-Doc/Contribution/article_12.html"><span class="label">TF WIFI 小白编</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/index.html"><span class="label">LicheePI Nano</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">上手体验</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/get_started/first_eye.html"><span class="label">初见</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/get_started/first_eat.html"><span class="label">前言</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">系统适配篇</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/build_index.html"><span class="label">总述</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/onekey.html"><span class="label">镜像包一键烧录</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/docker.html"><span class="label">docker快速搭建环境</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/bootargs.html"><span class="label">uboot传递参数</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/kernel.html"><span class="label">主线linux编译</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/devicetree.html"><span class="label">设备树添加节点</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/rootfs.html"><span class="label">根文件系统编译</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/build_sys/build_flash_copy.html"><span class="label">SPI-Flash系统编译</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">驱动开发</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/driver/touchscreen.html"><span class="label">电容触摸屏适配</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">从挖坑到填坑</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/step_by_step/one_openbox.html"><span class="label">开箱介绍</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/step_by_step/two_sunxi-tools.html"><span class="label">编译使用sunxi-tools</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/step_by_step/three_uboot.html"><span class="label">编译测试uboot</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/step_by_step/four_linux.html"><span class="label">编译测试linux</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">应用开发</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Nano-Doc-Backup/application/littlevgl.html"><span class="label">littlevGL的使用</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">MaixSense</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/MaixSense/contribution/Build_R329.html"><span class="label">R329主线armbian内核 系统 驱动开发方法</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/MaixSense/contribution/Tina_R329_swupdate_OTA.html"><span class="label">Tina R329 swupdate OTA 步骤 </span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/MaixSense/application/Speech_usage_zh.html"><span class="label">Maix-Speech 的相关使用</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">Lichee RV</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/soft/Lichee/zh/Lichee-RV/build_sys/Buildroot.html"><span class="label">使用Buildroot</span><span class=""></span></a></li>
<li class="active with_link"><a href="/soft/Lichee/zh/Lichee-RV/contribution/Dual_screen_display/Dual_screen_display.html"><span class="label">86 Panel RGB 与 SPI 双屏显示</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/soft/Lichee/zh/Lichee-RV/contribution/D1_Kubernetes.html"><span class="label">D1上Kubernetes相关软件编译</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">V83x</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/soft/Lichee/zh/MaixII/V83X/contribution/v83x_sdk_compile/V83x_sdk_kernel_compile.html"><span class="label">V83X sdk开发方法</span><span class=""></span></a></li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>使用 LicheeRV 86 Panel 与 Tina BSP 实现 RGB 与 SPI 双屏显示</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/sipeed/sipeed_wiki/blob/main/docs/soft/Lichee/zh/Lichee-RV/contribution/Dual_screen_display/Dual_screen_display.md" target="_blank">
                                    <span id='editPage'>编辑本页</span>
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <blockquote>
<p>编辑于2022年3月28日</p>
</blockquote>
<p><a href="http://www.gloomyghost.com/live/20220131.aspx"  target="_blank">原文链接</a> <a href="http://www.gloomyghost.com/"  target="_blank">原文作者空间</a><br />
原创时间: 2022年1月31日</p>
<p>Tina 提供了2种 SPI TFT 显示屏的驱动方式。</p>
<ul>
<li>第一种是官方推荐的 fbdev 方式，使用 Framebuffer implementaion without display hardware of AW 进行 SPI屏幕的驱动。</li>
<li>另外一种是使用 fbtft 进行 SPI 屏幕驱动。</li>
</ul>
<p>fbdev 方式由于 pinctrl 在新内核中调用方式出现修改，所以暂时无法使用。修改难度较大。<br />
fbtft 虽然官方wiki表明不建议在 Linux 5.4 中使用，但是其实也是可以使用的，只需要修改一下 GPIO 的注册方式就行。</p>
<h2 id="%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">环境搭建</h2>
<p>下面三种方法选择一种即可</p>
<ul>
<li><a href="./sipeed_D1_docker.html"  >使用sipeed提供的docker</a></li>
<li><a href="./environment.html"  >使用原文作者的环境</a></li>
<li><a href="https://d1.docs.aw-ol.com/study/study_2getsdk/"  target="_blank">使用D1官方环境</a></li>
</ul>
<h2 id="%E5%85%88%E9%A9%B1%E5%8A%A8-SPI-%E5%B1%8F%E5%B9%95">先驱动 SPI 屏幕</h2>
<p>这里驱动的屏幕所选择的是 ST7789V SPI</p>
<h3 id="%E4%BF%AE%E6%94%B9-FBTFT-%E9%A9%B1%E5%8A%A8">修改 FBTFT 驱动</h3>
<p>进入 tina-d1-open/lichee/linux-5.4/drivers/staging/fbtft 找到 fbtft-core.c<br />
首先加入将要使用到的头文件</p>

<pre class="language-c"><code class="language-c">#include &lt;linux/gpio.h&gt;
#include &lt;linux/of_gpio.h&gt;
</code></pre>
<p>然后找到 static int fbtft_request_one_gpio() 函数，将已经弃用的端口绑定方法改为以下内容</p>

<pre class="language-c"><code class="language-c">static int fbtft_request_one_gpio(struct fbtft_par *par,
                  const char *name, int index,
                  struct gpio_desc **gpiop)
{
    struct device *dev = par-&gt;info-&gt;device;
    struct device_node *node = dev-&gt;of_node;
    int gpio, flags, ret = 0;
    enum of_gpio_flags of_flags;

    if (of_find_property(node, name, NULL)) {
        gpio = of_get_named_gpio_flags(node, name, index, &amp;of_flags);
        if (gpio == -ENOENT)
            return 0;
        if (gpio == -EPROBE_DEFER)
            return gpio;
        if (gpio &lt; 0) {
            dev_err(dev,
                &quot;failed to get '%s' from DT\n&quot;, name);
            return gpio;
        }
        flags = (of_flags &amp; OF_GPIO_ACTIVE_LOW) ? GPIOF_OUT_INIT_LOW :
                            GPIOF_OUT_INIT_HIGH;
        ret = devm_gpio_request_one(dev, gpio, flags,
                        dev-&gt;driver-&gt;name);
        if (ret) {
            dev_err(dev,
                &quot;gpio_request_one('%s'=%d) failed with %d\n&quot;,
                name, gpio, ret);
            return ret;
        }

        *gpiop = gpio_to_desc(gpio);
        fbtft_par_dbg(DEBUG_REQUEST_GPIOS, par, &quot;%s: '%s' = GPIO%d\n&quot;,
                            __func__, name, gpio);
    }

    return ret;
}
</code></pre>
<p>找到 static void fbtft_reset() 函数，将 RST 信号最后拉高</p>

<pre class="language-c"><code class="language-c">static void fbtft_reset(struct fbtft_par *par)
{
    if (!par-&gt;gpio.reset)
        return;
    fbtft_par_dbg(DEBUG_RESET, par, &quot;%s()\n&quot;, __func__);
    gpiod_set_value_cansleep(par-&gt;gpio.reset, 1);
    msleep(10);
    gpiod_set_value_cansleep(par-&gt;gpio.reset, 0);
    msleep(200);
    gpiod_set_value_cansleep(par-&gt;gpio.reset, 1);
    msleep(10);
}

</code></pre>
<p>找到 static void fbtft_set_addr_win() 函数，添加地址偏移。否则会出现下图部分雪花屏现象。</p>
<p><img src="./assets/display_offset_situation.jpg" alt="" /></p>

<pre class="language-c"><code class="language-c">static void fbtft_set_addr_win(struct fbtft_par *par, int xs, int ys, int xe,
    		       int ye)
{
    switch(par-&gt;info-&gt;var.rotate)
    {
    	case   0: xs+=53;xe+=53;ys+=40;ye+=40;
    			 break;
    	case  90: xs+=40;xe+=40;ys+=53;ye+=53;
    			 break;
    	case 180: xs+=53;xe+=53;ys+=40;ye+=40;
    			 break;
    	case 270: xs+=40;xe+=40;ys+=53;ye+=53;
    			 break;
    	default :
    			 break;
    }

    write_reg(par, MIPI_DCS_SET_COLUMN_ADDRESS,
    	  (xs &gt;&gt; 8) &amp; 0xFF, xs &amp; 0xFF, (xe &gt;&gt; 8) &amp; 0xFF, xe &amp; 0xFF);

    write_reg(par, MIPI_DCS_SET_PAGE_ADDRESS,
    	  (ys &gt;&gt; 8) &amp; 0xFF, ys &amp; 0xFF, (ye &gt;&gt; 8) &amp; 0xFF, ye &amp; 0xFF);

    write_reg(par, MIPI_DCS_WRITE_MEMORY_START);
}
</code></pre>
<p>当前目录下找到 fb_st7789v.c，参照STM32的初始化函数对初始化部分进行修改。</p>

<pre class="language-c"><code class="language-c">static int init_display(struct fbtft_par *par)
{
    par-&gt;fbtftops.reset(par);
    mdelay(50);
    write_reg(par,0x36,0x00);
    write_reg(par,0x3A,0x05);
    write_reg(par,0xB2,0x0C,0x0C,0x00,0x33,0x33);
    write_reg(par,0xB7,0x35);
    write_reg(par,0xBB,0x19);
    write_reg(par,0xC0,0x2C);
    write_reg(par,0xC2,0x01);
    write_reg(par,0xC3,0x12);
    write_reg(par,0xC4,0x20);
    write_reg(par,0xC6,0x0F);
    write_reg(par,0xD0,0xA4,0xA1);
    write_reg(par,0xE0,0xD0,0x04,0x0D,0x11,0x13,0x2B,0x3F,0x54,0x4C,0x18,0x0D,0x0B,0x1F,0x23);
    write_reg(par,0xE1,0xD0,0x04,0x0C,0x11,0x13,0x2C,0x3F,0x44,0x51,0x2F,0x1F,0x1F,0x20,0x23);
    write_reg(par,0x21);
    write_reg(par,0x11);
    mdelay(50);
    write_reg(par,0x29);
    mdelay(200);
    return 0;
}
</code></pre>
<p>将相关参数配置为屏幕实际大小</p>

<pre class="language-c"><code class="language-c">static struct fbtft_display display = {
    .regwidth = 8,
    .width = 135,
    .height = 240,
    .gamma_num = 2,
    .gamma_len = 14,
    .gamma = DEFAULT_GAMMA,
    .fbtftops = {
    	.init_display = init_display,
    	.set_var = set_var,
    	.set_gamma = set_gamma,
    	.blank = blank,
    },
};
</code></pre>
<h3 id="%E8%AE%BE%E5%A4%87%E6%A0%91%E4%BF%AE%E6%94%B9">设备树修改</h3>
<p>首先打开电路图，找到 SPI 屏幕的电路。</p>
<p><img src="./assets/SPI_Pins.jpg" alt="" /></p>
<p>根据电路，在 tina-d1-open_new/device/config/chips/d1/configs/nezha/board.dts0 文件中 找到 pio 节点，添加 SPI0 所用引脚；spi0_pins_a 作为数据时钟绑定，spi0_pins_b 作为 CS 的绑定，并上拉。RST、DC、背光引脚在这里不做声明。</p>

<pre class="language-dts"><code class="language-dts">&amp;spi0 {
    clock-frequency = &lt;100000000&gt;;
    pinctrl-0 = &lt;&amp;spi0_pins_a &amp;spi0_pins_b&gt;;
    status = &quot;okay&quot;;

    st7789v@0 {
    	status = &quot;okay&quot;;
    	compatible = &quot;sitronix,st7789v&quot;;
        reg = &lt;0&gt;;
        spi-max-frequency = &lt;32000000&gt;;
        rotate = &lt;90&gt;;
        rgb;
        fps = &lt;30&gt;;
        buswidth = &lt;8&gt;;
    	reset = &lt;&amp;pio PC 6 GPIO_ACTIVE_LOW&gt;;
        dc = &lt;&amp;pio PC 5 GPIO_ACTIVE_LOW&gt;;
    	led = &lt;&amp;pio PD 18 GPIO_ACTIVE_HIGH&gt;;
        debug = &lt;1&gt;;
    };
};
</code></pre>
<p>最后，将不需要的屏幕关闭，方便调试</p>

<pre class="language-dts"><code class="language-dts">&amp;disp {
    disp_init_enable = &lt;0&gt;;
    ......
}

&amp;lcd0 {
    lcd_used = &lt;0&gt;;
    ......
}

&amp;hdmi {
    hdmi_used = &lt;0&gt;;
    ......
}
</code></pre>
<h3 id="%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE">内核配置</h3>
<p>进入 kernel_menuconfig ，开启 FBTFT，关闭 RGB、MIPI 所使用的 DISP Driver Support(sunxi-disp2) 输出。</p>

<pre class="language-menuconfig"><code class="language-menuconfig">Device Drivers  ---&gt;
     Graphics support  ---&gt;
     	Frame buffer Devices  ---&gt;
     		 &lt;*&gt; Support for frame buffer devices  ---&gt;
     		 Video support for sunxi  ---&gt;
     		 	 &lt; &gt; DISP Driver Support(sunxi-disp2)
     [*] Staging drivers  ---&gt;
     	 &lt;*&gt;   Support for small TFT LCD display modules  ---&gt;
     	 	  &lt;*&gt;   FB driver for the ST7789V LCD Controller
</code></pre>
<p>由于上面配置关闭了 DISP Driver Support(sunxi-disp2) ，所用需要在 menuconfig 里将内核模块关闭，否则会出现找不到驱动的错误。</p>

<pre class="language-menuconfig"><code class="language-menuconfig">Kernel modules  ---&gt;
    Video Support  ---&gt;
    	 &lt; &gt; kmod-sunxi-disp....................................... sunxi-disp support
         &lt; &gt; kmod-sunxi-g2d......................................... sunxi-g2d support 
         &lt; &gt; kmod-sunxi-hdmi....................................... sunxi-hdmi support
         &lt; &gt; kmod-sunxi-uvc......................................... sunxi-uvc support
</code></pre>
<p>编译，打包，使用 fbviewer 进行测试</p>

<pre class="language-bash"><code class="language-bash">make -j65535
pack

fbviewer Yuzuki.jpg
</code></pre>
<p><img src="./assets/SPI_Display.jpg" alt="" /></p>
<h2 id="%E4%BF%AE%E6%94%B9%E4%B8%BA%E5%8F%8C%E5%B1%8F%E9%A9%B1%E5%8A%A8">修改为双屏驱动</h2>
<p>修改双屏也很简单，SPI 屏幕调试完成之后，将刚才关闭的各类驱动打开即可。</p>
<h3 id="%E9%85%8D%E7%BD%AE%E8%AE%BE%E5%A4%87%E6%A0%91">配置设备树</h3>
<p>找到 SPI0 节点，将背光 led 注释掉，查看电路图可知 RGB 屏幕和 SPI 屏幕使用的背光是同一个，这里不需要分开注册。</p>

<pre class="language-dts"><code class="language-dts">&amp;spi0 {
    clock-frequency = &lt;100000000&gt;;
    pinctrl-0 = &lt;&amp;spi0_pins_a &amp;spi0_pins_b&gt;;
    status = &quot;okay&quot;;

    st7789v@0 {
    	status = &quot;okay&quot;;
    	compatible = &quot;sitronix,st7789v&quot;;
        reg = &lt;0&gt;;
        spi-max-frequency = &lt;32000000&gt;;
        rotate = &lt;90&gt;;
        rgb;
        fps = &lt;30&gt;;
        buswidth = &lt;8&gt;;
    	reset = &lt;&amp;pio PC 6 GPIO_ACTIVE_LOW&gt;;
        dc = &lt;&amp;pio PC 5 GPIO_ACTIVE_LOW&gt;;
//		led = &lt;&amp;pio PD 18 GPIO_ACTIVE_HIGH&gt;;
        debug = &lt;1&gt;;
    };
};
</code></pre>
<p>把之前关闭的显示输出重新打开</p>

<pre class="language-dts"><code class="language-dts">&amp;disp {
    disp_init_enable = &lt;1&gt;;
    ......
}

&amp;lcd0 {
    lcd_used = &lt;1&gt;;
    ......
}

&amp;hdmi {
    hdmi_used = &lt;1&gt;;
    ......
}
</code></pre>
<h3 id="%E9%85%8D%E7%BD%AE%E5%86%85%E6%A0%B8">配置内核</h3>
<p>进入 kernel_menuconfig ，开启 DISP Driver Support(sunxi-disp2) 输出，并选择面板驱动。</p>

<pre class="language-menucnfig"><code class="language-menucnfig">Device Drivers  ---&gt;
     Graphics support  ---&gt;
     	Frame buffer Devices  ---&gt;
     		 &lt;*&gt; Support for frame buffer devices  ---&gt;
     		 Video support for sunxi  ---&gt;
     		 	 &lt;*&gt; DISP Driver Support(sunxi-disp2)
     		 	 &lt;*&gt; HDMI2.0 Driver Support(sunxi-disp2)
     		 	 	 HDMI2.0 PHY SELECT. (Allwinner PHY)  ---&gt;
     		 	     LCD panels select  ---&gt;
     		 	 		 [*] LCD support ST7701S RGB panel
     [*] Staging drivers  ---&gt;
     	 &lt;*&gt;   Support for small TFT LCD display modules  ---&gt;
     	 	  &lt;*&gt;   FB driver for the ST7789V LCD Controller
</code></pre>
<p>在 menuconfig 里将内核模块重新打开。</p>

<pre class="language-menuconfig"><code class="language-menuconfig">Kernel modules  ---&gt;
    Video Support  ---&gt;
    	 &lt;*&gt; kmod-sunxi-disp....................................... sunxi-disp support
         &lt;*&gt; kmod-sunxi-g2d......................................... sunxi-g2d support 
         &lt;*&gt; kmod-sunxi-hdmi....................................... sunxi-hdmi support
         &lt;*&gt; kmod-sunxi-uvc......................................... sunxi-uvc support
</code></pre>
<p>编译，打包，测试。这里使用 ffmpeg 进行双屏播放 badapple.mp4<br />
<img src="./assets/Play_badapple.jpg" alt="" /></p>
<p>附录：部分设备树完整参考（配置双屏后，HDMI禁用了）</p>

<pre class="language-dts"><code class="language-dts">&amp;pio {
    ...前略...
    spdif_pins_b: spdif_sleep@0 {
    	pins = &quot;PB0&quot;;
    	function = &quot;io_disabled&quot;;
    	drive-strength = &lt;20&gt;;
    	bias-disable;
    };

    spi0_pins_a: spi0@0 {
    	pins = &quot;PC2&quot;, &quot;PC4&quot;; /*clk mosi*/
    	function = &quot;spi0&quot;;
    	drive-strength = &lt;10&gt;;
    };

    spi0_pins_b: spi0@1 {
    	pins = &quot;PC3&quot;;
    	function = &quot;spi0&quot;;
    	drive-strength = &lt;10&gt;;
    	bias-pull-up;   // only CS should be pulled up
    };

    spi1_pins_a: spi1@0 {
    	pins = &quot;PD11&quot;, &quot;PD12&quot;, &quot;PD13&quot;,&quot;PD14&quot;, &quot;PD15&quot;; /*clk mosi miso hold wp*/
    	function = &quot;spi1&quot;;
    	drive-strength = &lt;10&gt;;
    };

    spi1_pins_b: spi1@1 {
    	pins = &quot;PD10&quot;;
    	function = &quot;spi1&quot;;
    	drive-strength = &lt;10&gt;;
    	bias-pull-up;   // only CS should be pulled up
    };

    spi1_pins_c: spi1@2 {
    	pins = &quot;PD10&quot;, &quot;PD11&quot;, &quot;PD12&quot;, &quot;PD13&quot;,&quot;PD14&quot;, &quot;PD15&quot;;
    	function = &quot;gpio_in&quot;;
    	drive-strength = &lt;10&gt;;
    };

    ledc_pins_a: ledc@0 {
    	pins = &quot;PC0&quot;;
    	function = &quot;ledc&quot;;
    	drive-strength = &lt;10&gt;;
    };

    ledc_pins_b: ledc@1 {
    	pins = &quot;PC0&quot;;
    	function = &quot;gpio_in&quot;;
    };
    
    ...后略...
}；

&amp;spi0 {
    clock-frequency = &lt;100000000&gt;;
    pinctrl-0 = &lt;&amp;spi0_pins_a &amp;spi0_pins_b&gt;;
    status = &quot;okay&quot;;

    st7789v@0 {
    	status = &quot;okay&quot;;
    	compatible = &quot;sitronix,st7789v&quot;;
        reg = &lt;0&gt;;
        spi-max-frequency = &lt;32000000&gt;;
        rotate = &lt;90&gt;;
        rgb;
        fps = &lt;30&gt;;
        buswidth = &lt;8&gt;;
    	reset = &lt;&amp;pio PC 6 GPIO_ACTIVE_LOW&gt;;
        dc = &lt;&amp;pio PC 5 GPIO_ACTIVE_LOW&gt;;
//		led = &lt;&amp;pio PD 18 GPIO_ACTIVE_HIGH&gt;;
        debug = &lt;1&gt;;
    };
};

/*----------------------------------------------------------------------------------
disp init configuration

disp_mode             (0:screen0&lt;screen0,fb0&gt;)
screenx_output_type   (0:none; 1:lcd; 2:tv; 3:hdmi;5:vdpo)
screenx_output_mode   (used for hdmi output, 0:480i 1:576i 2:480p 3:576p 4:720p50)
                      (5:720p60 6:1080i50 7:1080i60 8:1080p24 9:1080p50 10:1080p60)
screenx_output_format (for hdmi, 0:RGB 1:yuv444 2:yuv422 3:yuv420)
screenx_output_bits   (for hdmi, 0:8bit 1:10bit 2:12bit 2:16bit)
screenx_output_eotf   (for hdmi, 0:reserve 4:SDR 16:HDR10 18:HLG)
screenx_output_cs     (for hdmi, 0:undefined  257:BT709 260:BT601  263:BT2020)
screenx_output_dvi_hdmi (for hdmi, 0:undefined 1:dvi mode 2:hdmi mode)
screen0_output_range   (for hdmi, 0:default 1:full 2:limited)
screen0_output_scan    (for hdmi, 0:no data 1:overscan 2:underscan)
screen0_output_aspect_ratio  (for hdmi, 8-same as original picture 9-4:3 10-16:9 11-14:9)
fbx format            (4:RGB655 5:RGB565 6:RGB556 7:ARGB1555 8:RGBA5551 9:RGB888 10:ARGB8888 12:ARGB4444)
fbx pixel sequence    (0:ARGB 1:BGRA 2:ABGR 3:RGBA)
fb0_scaler_mode_enable(scaler mode enable, used FE)
fbx_width,fbx_height  (framebuffer horizontal/vertical pixels, fix to output resolution while equal 0)
lcdx_backlight        (lcd init backlight,the range:[0,256],default:197
lcdx_yy               (lcd init screen bright/contrast/saturation/hue, value:0~100, default:50/50/57/50)
lcd0_contrast         (LCD contrast, 0~100)
lcd0_saturation       (LCD saturation, 0~100)
lcd0_hue              (LCD hue, 0~100)
framebuffer software rotation setting:
disp_rotation_used:   (0:disable; 1:enable,you must set fbX_width to lcd_y,
set fbX_height to lcd_x)
degreeX:              (X:screen index; 0:0 degree; 1:90 degree; 3:270 degree)
degreeX_Y:            (X:screen index; Y:layer index 0~15; 0:0 degree; 1:90 degree; 3:270 degree)
devX_output_type : config output type in bootGUI framework in UBOOT-2018.
    			   (0:none; 1:lcd; 2:tv; 4:hdmi;)
devX_output_mode : config output resolution(see include/video/sunxi_display2.h) of bootGUI framework in UBOOT-2018
devX_screen_id   : config display index of bootGUI framework in UBOOT-2018
devX_do_hpd      : whether do hpd detectation or not in UBOOT-2018
chn_cfg_mode     : Hardware DE channel allocation config. 0:single display with 6
    			   channel, 1:dual display with 4 channel in main display and 2 channel in second
                   display, 2:dual display with 3 channel in main display and 3 channel in second
                   in display.
----------------------------------------------------------------------------------*/
&amp;disp {
    disp_init_enable         = &lt;1&gt;;
    disp_mode                = &lt;0&gt;;

    screen0_output_type      = &lt;1&gt;;
    screen0_output_mode      = &lt;4&gt;;

    screen1_output_type      = &lt;3&gt;;
    screen1_output_mode      = &lt;10&gt;;

    screen1_output_format    = &lt;0&gt;;
    screen1_output_bits      = &lt;0&gt;;
    screen1_output_eotf      = &lt;4&gt;;
    screen1_output_cs        = &lt;257&gt;;
    screen1_output_dvi_hdmi  = &lt;2&gt;;
    screen1_output_range     = &lt;2&gt;;
    screen1_output_scan      = &lt;0&gt;;
    screen1_output_aspect_ratio = &lt;8&gt;;

    dev0_output_type         = &lt;1&gt;;
    dev0_output_mode         = &lt;4&gt;;
    dev0_screen_id           = &lt;0&gt;;
    dev0_do_hpd              = &lt;0&gt;;

    dev1_output_type         = &lt;4&gt;;
    dev1_output_mode         = &lt;10&gt;;
    dev1_screen_id           = &lt;1&gt;;
    dev1_do_hpd              = &lt;1&gt;;

    def_output_dev           = &lt;0&gt;;
    hdmi_mode_check          = &lt;1&gt;;

    fb0_format               = &lt;0&gt;;
    fb0_width                = &lt;0&gt;;
    fb0_height               = &lt;0&gt;;

    fb1_format               = &lt;0&gt;;
    fb1_width                = &lt;0&gt;;
    fb1_height               = &lt;0&gt;;
    chn_cfg_mode             = &lt;1&gt;;

    disp_para_zone           = &lt;1&gt;;
    /*VCC-LCD*/
/*	dc1sw-supply = &lt;&amp;reg_dc1sw&gt;;*/
    /*VCC-DSI*/
/*	eldo3-supply = &lt;&amp;reg_eldo3&gt;;*/
    /*VCC-PD*/
/*	dcdc1-supply = &lt;&amp;reg_dcdc1&gt;;*/
};

/*----------------------------------------------------------------------------------
;lcd0 configuration

;lcd_if:               0:hv(sync+de); 1:8080; 2:ttl; 3:lvds; 4:dsi; 5:edp; 6:extend dsi
;lcd_hv_if             0:Parallel RGB; 8:Serial RGB; 10:Dummy RGB; 11: RGB Dummy;12:CCIR656
;lcd_hv_clk_phase      0:0 degree;1:90 degree;2:180 degree;3:270 degree
;lcd_hv_sync_polarity  0:vs low,hs low; 1:vs high,hslow; 2:vs low,hs high; 3:vs high,hs high
;lcd_hv_syuv_seq       0:YUYV; 1:YVYU; 2:UYVY; 3:VYUY
;lcd_cpu_if            0:18bit/1 cycle parallel(RGB666); 4:16bit/1cycle parallel (RGB565)
;                      6:18bit/3 cycle parallel(RGB666); 7:16bit/2cycle parallel (RGB565)
;lcd_cpu_te            0:frame auto trigger; 1:frame triggered by te rising edge; 2:frame triggered by te falling edge;
;lcd_dsi_if            0:video mode; 1: Command mode; 2:video burst mode
;lcd_dsi_te            0:frame auto trigger; 1:frame triggered by te rising edge; 2:frame triggered by te falling edge;
;lcd_x:                lcd horizontal resolution
;lcd_y:                lcd vertical resolution
;lcd_width:            width of lcd in mm
;lcd_height:           height of lcd in mm
;lcd_dclk_freq:        in MHZ unit
;lcd_pwm_freq:         in HZ unit
;lcd_pwm_pol:          lcd backlight PWM polarity
;lcd_pwm_max_limit     lcd backlight PWM max limit(&lt;=255)
;lcd_hbp:              hsync back porch(pixel) + hsync plus width(pixel);
;lcd_ht:               hsync total cycle(pixel)
;lcd_vbp:              vsync back porch(line) + vysnc plus width(line)
;lcd_vt:               vysnc total cycle(line)
;lcd_hspw:             hsync plus width(pixel)
;lcd_vspw:             vysnc plus width(pixel)
;lcd_lvds_if:          0:single link;  1:dual link
;lcd_lvds_colordepth:  0:8bit; 1:6bit
;lcd_lvds_mode:        0:NS mode; 1:JEIDA mode
;lcd_frm:              0:disable; 1:enable rgb666 dither; 2:enable rgb656 dither
;lcd_io_phase:         0:noraml; 1:intert phase(0~3bit: vsync phase; 4~7bit:hsync phase;
;                      8~11bit:dclk phase; 12~15bit:de phase)
;lcd_gamma_en          lcd gamma correction enable
;lcd_bright_curve_en   lcd bright curve correction enable
;lcd_cmap_en           lcd color map function enable
;deu_mode              0:smoll lcd screen; 1:large lcd screen(larger than 10inch)
;lcdgamma4iep:         Smart Backlight parameter, lcd gamma vale * 10;
;                      decrease it while lcd is not bright enough; increase while lcd is too bright
;smart_color           90:normal lcd screen 65:retina lcd screen(9.7inch)
;Pin setting for special function ie.LVDS, RGB data or vsync
;   name(donot care) = port:PD12&lt;pin function&gt;&lt;pull up or pull down&gt;&lt;drive ability&gt;&lt;output level&gt;
;Pin setting for gpio:
;   lcd_gpio_X     = port:PD12&lt;pin function&gt;&lt;pull up or pull down&gt;&lt;drive ability&gt;&lt;output level&gt;
;Pin setting for backlight enable pin
;   lcd_bl_en     = port:PD12&lt;pin function&gt;&lt;pull up or pull down&gt;&lt;drive ability&gt;&lt;output level&gt;
;fsync setting, pulse to csi
;lcd_fsync_en          (0:disable fsync,1:enable)
;lcd_fsync_act_time    (active time of fsync, unit:pixel)
;lcd_fsync_dis_time    (disactive time of fsync, unit:pixel)
;lcd_fsync_pol         (0:positive;1:negative)
;gpio config: &lt;&amp;pio for cpu or &amp;r_pio for cpus, port, port num, pio function,
pull up or pull down(default 0), driver level(default 1), data&gt;
;For dual link lvds: use lvds2link_pins_a  and lvds2link_pins_b instead
;For rgb24: use rgb24_pins_a  and rgb24_pins_b instead
;For lvds1: use lvds1_pins_a  and lvds1_pins_b instead
;For lvds0: use lvds0_pins_a  and lvds0_pins_b instead
;----------------------------------------------------------------------------------*/
&amp;lcd0 {
    lcd_used        = &lt;1&gt;;
    lcd_driver_name = &quot;st7701s_rgb&quot;;

    lcd_if          = &lt;0&gt;;
    lcd_hv_if       = &lt;0&gt;;

    lcd_width       = &lt;70&gt;;
    lcd_height      = &lt;72&gt;;
    lcd_x           = &lt;480&gt;;
    lcd_y           = &lt;480&gt;;
    lcd_dclk_freq   = &lt;19&gt;;
    lcd_hbp         = &lt;60&gt;;
    lcd_ht          = &lt;612&gt;;
    lcd_hspw        = &lt;12&gt;;
    lcd_vbp         = &lt;18&gt;;
    lcd_vt          = &lt;520&gt;;
    lcd_vspw        = &lt;4&gt;;

    lcd_backlight   = &lt;50&gt;;
    lcd_pwm_used    = &lt;1&gt;;
    lcd_pwm_ch      = &lt;7&gt;;
    lcd_pwm_freq    = &lt;20000&gt;;
    lcd_pwm_pol     = &lt;1&gt;;
    lcd_bright_curve_en = &lt;0&gt;;

    lcd_frm         = &lt;1&gt;;
    lcd_io_phase    = &lt;0x0000&gt;;
    lcd_gamma_en    = &lt;0&gt;;
    lcd_cmap_en     = &lt;0&gt;;
    lcd_hv_clk_phase= &lt;0&gt;;
    lcd_hv_sync_polarity= &lt;0&gt;;
    lcd_rb_swap          = &lt;0&gt;;

    lcd_power       = &quot;vcc-lcd&quot;;
    lcd_pin_power   = &quot;vcc-pd&quot;;
    lcd_gpio_0      = &lt;&amp;pio PG 13 GPIO_ACTIVE_HIGH&gt;;
    lcd_gpio_1      = &lt;&amp;pio PE 14 GPIO_ACTIVE_HIGH&gt;;
    lcd_gpio_2      = &lt;&amp;pio PE 12 GPIO_ACTIVE_HIGH&gt;;
    lcd_gpio_3      = &lt;&amp;pio PE 15 GPIO_ACTIVE_HIGH&gt;;
    pinctrl-0       = &lt;&amp;rgb18_pins_a&gt;;
    pinctrl-1       = &lt;&amp;rgb18_pins_b&gt;;
};



&amp;hdmi {
    hdmi_used = &lt;0&gt;;
    hdmi_power_cnt = &lt;0&gt;;
    hdmi_cts_compatibility = &lt;1&gt;;
    hdmi_hdcp_enable = &lt;1&gt;;
    hdmi_hdcp22_enable = &lt;0&gt;;
    hdmi_cec_support = &lt;1&gt;;
    hdmi_cec_super_standby = &lt;0&gt;;

    ddc_en_io_ctrl = &lt;0&gt;;
    power_io_ctrl = &lt;0&gt;;
};
</code></pre>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/soft/Lichee/zh/Lichee-RV/build_sys/Buildroot.html">
                            <span class="icon"></span>
                            <span class="label">使用Buildroot</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/soft/Lichee/zh/Lichee-RV/contribution/D1_Kubernetes.html">
                            <span class="label">D1上Kubernetes相关软件编译</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>相关链接</a><ul><li><a target="_blank" href="https://www.sipeed.com">Sipeed 官网</a></li>
<li><a target="_blank" href="https://maixhub.com/">MaixHub</a></li>
<li><a target="_blank" href="https://sipeed.taobao.com/">Sipeed 淘宝</a></li>
<li><a  href="/sitemap.xml">网站地图</a></li>
<li><a target="_blank" href="https://github.com/teedoc/teedoc">网站使用 teedoc 生成</a></li>
</ul>
</li>
<li><a>源码</a><ul><li><a target="_blank" href="https://github.com/sipeed/sipeed_wiki">Wiki 源码</a></li>
<li><a target="_blank" href="https://github.com/sipeed">开源项目</a></li>
</ul>
</li>
<li><a>关注我们</a><ul><li><a target="_blank" href="https://twitter.com/SipeedIO">twitter</a></li>
<li><a target="_blank" href="https://sipeed.taobao.com/">淘宝</a></li>
<li><a target="_blank" href="https://github.com/sipeed">github</a></li>
<li><a><a>微信公众号</a><img src='/static/image/wechat.png'></a>
</li>
</ul>
</li>
<li><a>联系我们</a><ul><li><a>电话: +86 0755-27808509</a>
</li>
<li><a>商业支持: support@sipeed.com</a>
</li>
<li><a>地址: 深圳市宝安区新湖路4008号蘅芳科技办公大厦A座-2101C</a>
</li>
<li><a  href="/join_us.html">加入我们</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://www.sipeed.com">©2018-2023 深圳矽速科技有限公司</a></li>
<li><a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">粤ICP备19015433号</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "translate.google.com";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                    console.log("load google translate domain from local storage:" + domain);
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                console.log("google translate domain:" + domain + ", url: " + url);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/static/js/plugin_blog/main.js"></script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/js/prism.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/static/js/gitalk/main.js"></script>
    
        <link rel="stylesheet" href="/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/static/js/add_hint/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
        <script src="/static/js/thumbs_up/main.js"></script>
    
</body>

</html>