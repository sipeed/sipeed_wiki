{"/hardware/maixface/zh/index.html":{"title":"Sipeed Hardware","content":" title: Sipeed Hardware keywords: Sipeed, Hardware, 矽速, 硬件资料, 文档, 资料下载 desc: 矽速科技的硬件资料站 # Sipeed HardWare WIKI [English](./README_en.html) ## K210 核心模组 * [K210 核心模块](./core_modules/k210_core_modules.html) [M1/M1w](./core_modules/k210_core_modules.html) [M1n](./core_modules/k210_core_modules.html) ## MF 人脸识别模块 > MF 系列产品面向于商业开发应用 * [MF 人脸识别模块](./) [MF0&&MF0 Dock](./mf_ml_module/mf0_ml_module.html) [MF1 && MF2](./mf_ml_module/mf1_ml_module.html) [MF4 && MF5](./mf_ml_module/mf5_product.html) [MF 人脸识别模块 PCB 设计注意事项](./mf_ml_module/mf_precautions.html) [MF 更新固件说明](./mf_ml_module/mf_update_firmwave.html)"},"/hardware/maixface/zh/core_modules/k210_core_modules.html":{"title":"K210 核心模块","content":"# K210 核心模块 现有四款基于 K210 开发的 AIOT 模块：M1, M1w, M1n, MF0 特性说明： 这四款模块都是基于嘉楠堪智科技的边缘智能计算芯片K210（RISC V架构）设计的。主控芯片内置64位双核高性能低功耗处理器，每个核都有浮点运算单元（FPU），具备卷积人工神经网络智能硬件加速器（KPU）和快速傅里叶变换加速器（FFT）、搭载现场可编程IO阵列（FPIOA），支持多种主流AI编程框架。 ### Maix AIOT 模块差异对比 M1 M1w M1n MF0 外观 ![M1 模组](../../assets/mf_module/m1_m1w/sipeed_m1_module.png) ![M1W 模组](../../assets/mf_module/m1_m1w/sipeed_m1w_module.png) ![M1n 模组](../../assets/mf_module/m1n/sipeed_m1n_module.png) ![MF0 模组](../../assets/mf_module/mf0_mf0dock/sipeed_mf0_module.png) 尺寸 25.4x25.4x3.3（mm） 25.4x25.4x3.3（mm） 25.0x22.0x2.7（mm） 20.0x20.0x4.5（mm） 电压输出（提供给底板使用） 1.8V和3.3V 1.8V和3.3V 1.8V和3.3V 3.3V 最大功耗（非瞬态） 1.5W 3W 1.5W 1.5W WIFI功能 无 有（K210与ESP8285通过SPI接口和串口连接） 无 无 板载摄像头连接器 无 无 有（仅兼容单摄像头） 有（仅兼容单摄像头） 引脚形式 邮票孔 邮票孔 NGFF金手指 B KEY 2.54mm间距直插焊盘+SMD焊盘 是否引出摄像头信号 全引出 全引出 全引出 无 是否引出屏幕信号 全引出 全引出 全引出 无 引出普通IO口数量 48个（全引出） 48个（全引出） 44个（IO0 3没引出） 9个 ## 模块引脚定义 具体可下载规格书 M1/M1w: https://dl.sipeed.com/MAIX/HDK/Sipeed M1&M1W/Specifications M1n: https://dl.sipeed.com/MAIX/HDK/Sipeed M1n MF0: https://dl.sipeed.com/MAIX/HDK/Sipeed MF0/MF0 2802 ## M1/M1W(k210) ISP 模式(烧录模式) 更新 K210 时，需要让 K210 进入 ISP 模式，相关信息如下： ISP 引脚 ISP 引脚 描述 备注 BOOT (IO_16) 启动模式选择 低电平进入，ISP 模式 ISP_RX (IO_4) ISP 串口数据接收 ISP_TX (IO_5) ISP 串口数据发送 Boot 选择 **IO_16** 用于 **boot** 模式选择，上电时，拉高进入 **Flash** 启动，拉低进入 **ISP** 模式 Boot 选择引脚 拉高 拉低 IO_16 Flash 启动 ISP 模式 > K210 ISP 模式下，串口波特率建议配置为: 115200，1 停止位，8 数据位，不校验。 参考自动进入下载模式电路： ![](../../assets/mf_module/m1_m1w/K210_boot_reference.png) 参考来源： > 《K210技术规格书 v0.1.5》 > 2.5 特殊引脚: IO_16 用于 boot 模式选择，上电复位时，拉高进入 FLASH 启动，拉低进入 ISP 模式。复位后，IO_0、 IO_1、IO_2、IO_3 为 JTAG 引脚。IO_4、IO_5 为 ISP 引脚。 ## MF PCB 注意事项 使用 K210(M1/M1W) 自行设计人脸识别产品，请参考 [《MF 人脸识别模块 PCB 设计注意事项》](../mf_ml_module/mf_precautions.html)"},"/hardware/maixface/zh/mf_ml_module/mf_precautions.html":{"title":"MF PCB 设计注意事项","content":"# MF PCB 设计注意事项 ## 补光灯： 1、850nm 红外补光灯可以考虑选用 1W 或者 3W 功率的灯珠，因为更大功率的灯珠可以延长使用寿命、减少故障率和提高识别效果 2、红外灯珠和白光灯珠的驱动电路和元件参数，一定要根据实际灯珠选型和数量决定。因为不同的电路成本不一样，亮度感觉不一样，不同客户的需求不一样，因此客户需要根据实际情况选择和调整参数。强烈建议使用光度计去控制整个设计调试和批量生产的红外灯珠亮度的一致性 3、850nm 光线具有一定的穿透性。 目前已证实红外补光灯的 850nm 光线会从摄像头模组的四周和后背穿透进去，影响成像，进而影响屏幕画面或者影响识别效果。 因此必须在摄像头和补光灯之间，用 850nm 无法穿透的材料/喷漆/胶布等阻隔从灯珠散射到摄像头内部的红外光线。 另外，也可以通过拉开红外灯珠与摄像头的距离，距离保持 15mm 以上就能减少 80% 的负面影响，距离保持 20mm 以上，红外线就基本不会透射进摄像头了 4、红外补光灯与外壳前盖板（亚克力/塑料等材质）之间的距离应尽量少，即补光灯与盖板尽量紧贴。如果补光灯与盖板距离较大，会严重影响识别效果 5、在白光补光灯方面，尽量放置多个LED，使用均光板做柔光处理。均光板的面积尽量大。目前市面上的方案有圆圈跑道式的均光板，有小范围片状式的均光板，这个请客户的结构工程师在使用体验和外观设计上对此进行设计。如果不做柔光处理，白光补光灯会刺眼，并且使用户眼睛有十几秒的残影，使用体验不好 6、白光灯珠和红外灯珠的焊盘，需要连接到尽可能大的铜皮，以此提高散热性能 7、白光补光灯对地的电容应该去掉，否则会导致开灯的时候复位 ## 基本信息： 1、M1/M1w 模块底部的散热焊盘，需要连接到尽可能大的铜皮，以此提高散热性能 2、模块的 5V 是输入，外部给模块供电的；模块的 1.8V 和 3.3V 是模块内部 DC DC 生成的，主要是给模块内部核心元件使用的，其次是给模块外部的小电流元件使用（比如作为屏幕和摄像头的 1.8V 参考电压等小电流需求。不建议提供给模块外部的大电流元件使用） 3、如果需要做电容触摸，尽量把触摸芯片放到靠近手指触摸的位置之下。因为触摸芯片到触摸面板之间的走线长度，长度越长越难把握灵敏度、越容易受干扰 4、如果使用 M1w 模块，则需要遵守天线的摆放原则来摆放 IPEX 2.4G 天线，否则信号会有较大程度的损失 5、M1/M1w 模块的 RST、BANK6/7、摄像头 8 位数据和屏幕 8 位数据的工作电压和容忍电压都是 1.8V，BANK0/1/2/3/4/5 的工作电压和容忍电压都是 3.3V 耐压，一定不能超出耐压范围使用。如果要把 RST 引脚引出使用，强烈建议增加保护电路，以下两种电路都可以起到保护/兼容更高电平的作用： ![](../../assets/other/mf_precautions.png) 6、IO16（BOOT）要在底板加 10K 上拉电阻到 3.3V 7、FPIOA 允许用户将 255 个内部功能映射到芯片外围的 48 个自由 IO 上 8、M1 和 M1w 的区别是：M1 没有 WIFI，M1w 有 WIFI，M1w 模块的 IO0 IO3 这 4 个引脚是 K210 与 WIFI(ESP8285) 芯片之间的 SPI 连接，因此不能用作其他用途 9、请一定要在 PCB 上预留 M1/M1w 模块的 K210 和 WIFI 的下载接口，具体可以参考我们提供的标案原理图 ### 认证方面： 1、所有信号都要在靠近源端的地方预留串联磁珠或者RC 低通滤波电路，用来消除过冲和振铃。 RC 参数是 100R+100PF（这是屏幕信号的参数，其他信号必须根据实际测试决定，不能影响正常功能）。 低通 RC 形式是指：信号从源端输出先经过电阻/磁珠后经过电容，RC 元件靠近源端放置。 2、尽量在各路电源VCC预留串联焊盘，可能需要焊接磁珠或者电感，注意磁珠需要选择额定电流大于实际工作电流的 3、尽量在每个可能泄漏的位置、使用到的IO和电源线路等地方加上 ESD 二极管。ESD 二极管放置的位置根据ESD设计原则摆放 4、为了提高ESD防护性能，应该在屏幕到主板之间预留足够的位置放置导电泡棉。主板在该位置阻焊开窗。该位置应尽量接近供电电源的GND 5、PCB四周尽量打过孔，让过孔包围着PCB，元件需要远离可能的静电泄露点"},"/hardware/maixface/zh/mf_ml_module/mf5_product.html":{"title":"MF5","content":"# MF5 ## MF5 外观一览 ## MF5 板载接口 <table border \"2\"> <tr> <th colspan 6>MaixFace 5 引脚信息</th> </tr> <tr> <td colspan 3><img src \"./../../../zh/maixface/assets/mf_module/mf5/mf5_if_1.png\" height 400></td> <td colspan 3><img src \"./../../../zh/maixface/assets/mf_module/mf5/mf5_if_2.png\" height 400></td> </tr> <tr> <td>Maix Face Slik</td> <td>K210 IO</td> <td>ESP8285 IO</td> <td>Function</td> <td>Remark</td> <td>IO Voltage</td> </tr> <tr> <td>VIN</td> <td> </td> <td> </td> <td>电源输入正极</td> <td>12V</td> <td rowspan 22>3.3V</td> </tr> <tr> <td>GND</td> <td> </td> <td> </td> <td>电源输入负极</td> <td>电源GND</td> </tr> <tr> <td>NC</td> <td> </td> <td> </td> <td>继电器常闭触点</td> <td rowspan 3>继电器</td> </tr> <tr> <td>COM</td> <td> </td> <td> </td> <td>继电器公共触点</td> </tr> <tr> <td>NO</td> <td> </td> <td> </td> <td>继电器常开触点</td> </tr> <tr> <td>GND</td> <td> </td> <td> </td> <td>韦根接口RETURN</td> <td rowspan 3>韦根接口</td> </tr> <tr> <td>WGD0</td> <td>IO14</td> <td> </td> <td>韦根接口 D0</td> </tr> <tr> <td>WGD1</td> <td>IO15</td> <td> </td> <td>韦根接口 D1</td> </tr> <tr> <td>GND</td> <td> </td> <td> </td> <td>开门信号地</td> <td rowspan 2>开门信号 低电平: Open</td> </tr> <tr> <td>OPEN</td> <td>IO16</td> <td> </td> <td>开门信号输入</td> </tr> <tr> <td>3V3</td> <td> </td> <td> </td> <td>3.3V</td> <td rowspan 6>以太网/刷卡接口</td> </tr> <tr> <td>CS</td> <td>IO24</td> <td> </td> <td>SPI CS</td> </tr> <tr> <td>MISO</td> <td>IO2</td> <td> </td> <td>SPI MISO</td> </tr> <tr> <td>SCLK</td> <td>IO1</td> <td> </td> <td>SPI SCLK</td> </tr> <tr> <td>MOSI</td> <td>IO3</td> <td> </td> <td>SPI MOSI</td> </tr> <tr> <td>GND</td> <td> </td> <td> </td> <td>GND</td> </tr> <tr> <td>5V</td> <td> </td> <td> </td> <td>5V</td> <td rowspan 6>串口/K210下载</td> </tr> <tr> <td>RST</td> <td>IO54</td> <td> </td> <td>K210复位</td> </tr> <tr> <td>BOOT</td> <td>IO16</td> <td> </td> <td>K210进入ISP模式</td> </tr> <tr> <td>ISPTX</td> <td>IO5</td> <td> </td> <td>ISPTX</td> </tr> <tr> <td>ISPRX</td> <td>IO4</td> <td> </td> <td>ISPRX</td> </tr> <tr> <td>GND</td> <td> </td> <td> </td> <td>GND</td> </tr> </table> ## MF5 固件说明 MF5 为人脸识别门禁成品，默认烧录的固件不支持串口协议； 在烧录串口协议固件之后，协议串口为 WGD0 IO14(RX)，WGD1 1O15(TX)。"},"/hardware/maixface/zh/mf_ml_module/mf0_ml_module.html":{"title":"MF0 机器学习核心模组","content":"# MF0 机器学习核心模组 ## 软硬件概述 MF0 人脸识别模块外观一览 <table border \"3\"> <tr> <th colspan 3>MF0</th> </tr> <tr> <td width \"100\">描述</td> <td>正面视图</td> <td>背面视图</td> </tr> <tr> <td width \"100\">MF0</td> <td> <img src \"../../assets/mf_module/mf0_mf0dock/mf0_pin_map.png\" width \"600\" alt \"MF0 正面\"> Pin Map</br> </td> <td> <img src \"../../assets/mf_module/mf0_mf0dock/mf0_buttom.png\" width \"600\" alt \"MF0 背面视图\"> </td> </tr> <tr> <td>MF0 Dock</td> <td> <! <img src \"../assets/mf_module/mf1_bottom_v2(nand).png\" width \"600\" alt \"MF1(NAND Flash) 背面视图\"> > </td> <td> </td> </tr> </table> ### 模块特性： CPU ：RISC V 64bit 双核处理器, 400Mhz 标准频率（可超频） 图像识别：QVGA@60FPS/VGA@30FPS 深度学习框架：TensorFlow/Keras/Darknet 外设：FPIOA、UART、GPIO、SPI、I²C、I²S、WDT、TIMER、etc 2.54mm 间距 DIP/SMT 焊盘 能连接到面包板 板载摄像头连接器 ROM：4MByte RAM：6MByte （通用） + 2MByte （ KPU 专用） ### 硬件 pin No. 描述 24 用户 IO24 25 用户 IO25 26 用户 IO26，MF0_Dock(LCD_RST) 27 用户 IO27，MF0_Dock(LCD_CLK) 28 用户 IO28，MF0_Dock(LCD_DC) 29 用户 IO29，MF0_Dock(LCD_SDA) BOOT 上电 boot 模式选择（用户 IO16，不建议用户使用） IO5 用户 IO5（ISP_TX） IO4 用户 IO4（ISP_RX） EN MF0 电源使能引脚, 默认高电平使能 RST K210 复位引脚 VIN 外部供电电源 3.4 5.9V（推荐 5.0V） GND 外部供电电源地 3V3 模块电源 3.3V 输出 ## 协议 串口协议： MFO 默认烧录 HEX 协议固件 MF0 有两种协议固件，方便用户根据具体需求使用 HEX 格式串口协议固件 JSON 格式串口协议固件 HEX 例程 ### 串口协议助手 ## 更新 MF0 固件 MF0 硬件连接： No. USB 转串口模块 MF0 IO 备注 1 5V VIN 2 GND GND 3 TX IO4 4 RX IO5 5 DTR BOOT 6 RTS RST ![](../../assets/mf_module/mf0_mf0dock/mf0_flash.png) MF0 Dock 硬件连接： 根据下表连接之后，使用 kflash_gui 下载时，需要按下 boot 和 rst 按键，并先松开 rst 再松开 boot 按键，确保 K210 进入下载模式（ISP 模式） No. USB 转串口模块 MF0 Dock IO 备注 1 5V VIN 2 GND GND 3 TX IO4 4 RX IO5 ![](../../assets/mf_module/mf0_mf0dock/mf0_dock_flash.png) 然后使用 kflash_gui 下载 MF0 固件 ![](../../assets/mf_module/mf0_mf0dock/mf0_upgrade_firmwave.png)"},"/hardware/maixface/zh/mf_ml_module/mf1_ml_module.html":{"title":"MF 人脸识别模块 MF1","content":"# MF 人脸识别模块 MF1 ## **修改记录** 版本时间修改内容 1.02019.07.30初始版本 1.22020.08.1 ## 目录 [**硬件资源简介**](#硬件资源简介) [**功能简介**](#功能简介) [模块特性](#模块特性) [使用说明](#使用说明) [**应用方案**](#应用方案) [串口模块](#串口模块) <! [微信小程序模块](#微信小程序模块) > <! [二次开发](#二次开发) > <! [**Q&A**](#qa) > ## **硬件资源简介** <center class \"half\"> <img src \"../../assests/front.png\" width 50% /><img src \"assests/bottom.jpg\" width 50% /> </center> * CPU : **RISC V** 双核 64bit、内置FPU、频率 400Mhz 500Mhz * 图像识别：活体识别 * 双摄像头：红外（IR）+可见光（VIS） * 红外填充光：3W 红外发光二极管 * 显示器：1.33 英寸 IPS、分辨率 240*320显示屏 * 其他外设：电容触摸按钮/支持 3W 扬声器/MEMS 麦克风/SD NAND/RGB LED * 无线功能(可选) : 支持 2.4G 802.11.b/g/n、SPI 连接 * [淘宝购买](https://item.taobao.com/item.htm?spm a1z10.1 c.w4004 21231188695.25.27ba52b1bsusf7&id 599138281058) <div STYLE \"page break after: always;\"></div> ## **功能简介** ![MF1 引脚图](../../assets/mf_module/mf1/mf1_pin_map.png)"},"/hardware/maixface/zh/mf_ml_module/mf_update_firmwave.html":{"title":"MF 固件相关升级说明","content":"# MF 固件相关升级说明 在使用 **MF 人脸识别模块**过程中，如果存在固件存在 bug、有新功能固件 release、误擦除固件、字体资源、图片资源，那么就需要通过烧录还原固件。 ## MF 人脸识别模块固件、资源说明 **MF 人脸识别模块** 固件、字体资源、图片资源、说明如下： 类型 烧录地址 长度 说明 固件 0x000000 人脸模型 字体资源 图片资源 板级配置 0x7FF000 4 KB 人脸信息 0x800000 64 KB > 一般开发者在拿到 MF 模块之后，不需要关心该资源分布 MF 固件说明 固件分类 方向 协议 识别方式 wechat 固件类型数量 MF0 体验版模块 横版, 竖版 bin vis 2 MF1 离线版模块 横版，竖版 bin/json vis+ir 8 MF1_to_MF2 横版，竖版 bin/json vis+ir 8 MF2 微信半成品 横版，竖版 bin vis 支持 2 MF4 微信 (成品) 竖版 bin vis 支持 1 MF5 微信 (成品) 竖版 bin/json vis 支持 2 字体资源 图片资源 清除配信息 ## MF1 固件烧录(升级，还原出厂配置)步骤 在使用 **MF 人脸识别模块**过程中，如果存在固件存在 bug、有新功能固件 release、误擦除固件、字体资源、图片资源，那么就需要通过烧录还原固件。 烧录步骤： 1. 烧录 key_gen.bin 获取 key 2. 通过 support@sipeed.com 获取模型文件 3. 烧录模型文件 4. 烧录图片，字体资源， ### 准备： 在升级，还原出厂配置**MF 人脸识别模块** 之前我们需要准备软硬件。 **硬件准备：** **MF 人脸识别模块** USB Type C 数据线 **软件准备：** 烧录软件： kflash_gui(这里使用 kflash_gui v1.6.5 版本) 下载链接: Github: [kflash_gui](https://github.com/Sipeed/kflash_gui) Sipeed: [Sipeed 官方下载站 kflash_gui](https://dl.sipeed.com/MAIX/tools/kflash_gui/kflash_gui_v1.6.5) 烧录资源文件(根据情况烧录)：**MF 人脸识别模块固件**、算法模型文件、字体资源文件、图片资源文件 资源文件获取统一发送邮件到: Email: Support@sipeed.com 推荐发送邮件格式如下: > 问题类型: [MF 固件资源获取/（简短描述你的问题）] > > 使用硬件/固件版本: [MF0/MF1/MF2/MF4/MF5(这里标注使用的究竟是哪个模块、产品)] > > 内容: [最新固件获取/固件丢失/模型丢失(描述相关情况)] > > 机器码: [xxxxxxxxxxxxxxxxxxxxx(只有模型丢失时需要)] ### 烧录固件,资源文件 使用USB Type C 数据线 将**MF 人脸识别模块** 连接 电脑 ![MF1 connect USB](../../assets/mf_module/mf1/mf1_view.png) 打开 Kflash_gui 选择需要烧录的文件，选择版型(默认选择`自动选择`， 如果烧录失败则选择 `MaixDuino`)，选择串口号(CH522 有两个串口，失败则尝试另外一个)，配置波特率(默认选择 `150000`, 如果烧录失败则适当减低波特率,如 `115200`) ![image 20200806103433410](../../../zh/maix/assets/kflash_gui/image 20200806103433410.png) ![image 20200806105056527](../../../zh/maix/assets/kflash_gui/image 20200806105056527.png) ## 怎么获取 Key(机器码) 在使用过程中,如果模块的模型丢失或需要更换,需要发送 `Key` 到 <Support@sipeed.com> 推荐发送邮件格式如下: 首先下载 [key_gen.bin](https://fdvad021asfd8q.oss cn hangzhou.aliyuncs.com/Sipeed_M1/firmware/key_gen_v1.2.bin) 使用 `kflash_gui` 将固件 `key_gen.bin` 烧录到模块中之后,打开串口,波特率为`115200,8,N,1` > **[kflash_gui](https://github.com/Sipeed/kflash_gui/releases)** 为 K210 固件烧录工具, 源码: [**Sipeed/kflash_gui**](https://github.com/Sipeed/kflash_gui) 建议使用 [`XCOM`](tools/XCOM_V2.6.exe) 来看串口信息 轻点 `DTR` ,再松开,即可使模块复位,看到启动信息 <center class \"half\"> <img src \"../../../zh/maix/assets/other/how_to_get_key.png\" height 50% width 80% /> </center> ## MF 固件横竖版说明 由于采用的摄像头成像方向不同，相差 90度，摄像头寄存器无法配置旋转（软件旋转降低效率），故有横竖版两种固件； 如何确认摄像头对应的固件：（通过摄像头丝印区分） 横板 竖版 ![](../../assets/mf_module/mf1/mf_dual_camera_1.jpg) ![](../../assets/mf_module/mf1/mf_dual_camera_2.png) "}}