<!DOCTYPE html>

<html lang="en"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <script src="/maixcdk/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/maixcdk/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/maixcdk/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/maixcdk/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/maixcdk/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/maixcdk/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/maixcdk/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/maixcdk/static/css/search/style.css" type="text/css"/>
        
        <link rel="stylesheet" href="/maixcdk/static/css/custom.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?9cb07365544a53067c56c346c838181a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
        <link rel="stylesheet" href="/maixcdk/static/js/thumbs_up/style.css" type="text/css"/>
        
    
    
    <title>maix::comm - MaixCDK</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-thumbs-up": {"label_up": "Helpful", "label_down": "Not Helpful", "icon": "/static/images/thumbs_up/up.svg", "icon_clicked": "/static/images/thumbs_up/upped.svg", "url": "https://thumbs-up.sipeed.com", "show_up_count": true, "show_down_count": false, "msg_already_voted": "You have already voted", "msg_thanks": "Thanks for your vote", "msg_down_prompt": "Thanks to tell us where we can improve?(At least 10 characters)", "msg_down_prompt_error": "Message should be at least 10 characters and less than 256 characters", "msg_error": "Request server failed!"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": false, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/maixcdk/">
                
                
                    <h2>MaixCDK</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/maixcdk/doc/">Documentation</a></li>
<li class="active"><a  href="/maixcdk/api/">API</a></li>
<li class=""><a  href="/maixcdk/doc/faq.html">FAQ</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/sipeed/MaixCDK"><img src='/maixcdk/static/image/github-fill.svg' style='height: 1.5em;vertical-align: middle;'>&nbsp;</a></li>
</ul>

                <ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">Search</span>
                            <div id="search_hints">
                                <span id="search_input_hint">Keywords separated by space</span>
                                <span id="search_loading_hint">Loading, wait please ...</span>
                                <span id="search_download_err_hint">Download error, please check network and refresh again</span>
                                <span id="search_other_docs_result_hint">Result from other docs</span>
                                <span id="search_curr_doc_result_hint">Result from current doc</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/index.html"><span class="label">Brief</span><span class=""></span></a></li>
<li class="active_parent no_link"><a><span class="label">maix</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/maix/nn.html"><span class="label">nn</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/maix/nn/F.html"><span class="label">F</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/audio.html"><span class="label">audio</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/network.html"><span class="label">network</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/maix/network/wifi.html"><span class="label">wifi</span><span class=""></span></a></li>
</ul>
</li>
<li class="active with_link"><a href="/maixcdk/api/maix/comm.html"><span class="label">comm</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/maix/comm/modbus.html"><span class="label">modbus</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/modbus.html"><span class="label">modbus</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/maix/modbus/Slave.html"><span class="label">Slave</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/example.html"><span class="label">example</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/tensor.html"><span class="label">tensor</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/log.html"><span class="label">log</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/app.html"><span class="label">app</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/thread.html"><span class="label">thread</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/protocol.html"><span class="label">protocol</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/sys.html"><span class="label">sys</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/fs.html"><span class="label">fs</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/i18n.html"><span class="label">i18n</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/time.html"><span class="label">time</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/util.html"><span class="label">util</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/err.html"><span class="label">err</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/image.html"><span class="label">image</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/touchscreen.html"><span class="label">touchscreen</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/rtmp.html"><span class="label">rtmp</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/tracker.html"><span class="label">tracker</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/video.html"><span class="label">video</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/camera.html"><span class="label">camera</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/uvc.html"><span class="label">uvc</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/pipeline.html"><span class="label">pipeline</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/http.html"><span class="label">http</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/display.html"><span class="label">display</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/webrtc.html"><span class="label">webrtc</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/rtsp.html"><span class="label">rtsp</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral.html"><span class="label">peripheral</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/pwm.html"><span class="label">pwm</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/timer.html"><span class="label">timer</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/pinmap.html"><span class="label">pinmap</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/gpio.html"><span class="label">gpio</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/spi.html"><span class="label">spi</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/key.html"><span class="label">key</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/i2c.html"><span class="label">i2c</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/adc.html"><span class="label">adc</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/uart.html"><span class="label">uart</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/hid.html"><span class="label">hid</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/peripheral/wdt.html"><span class="label">wdt</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ahrs.html"><span class="label">ahrs</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev.html"><span class="label">ext_dev</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/mlx90640.html"><span class="label">mlx90640</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/tof100.html"><span class="label">tof100</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/tmc2209.html"><span class="label">tmc2209</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/cmap.html"><span class="label">cmap</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/fp5510.html"><span class="label">fp5510</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/imu.html"><span class="label">imu</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/bm8563.html"><span class="label">bm8563</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/pmu.html"><span class="label">pmu</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/qmi8658.html"><span class="label">qmi8658</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/maixcdk/api/maix/ext_dev/axp2101.html"><span class="label">axp2101</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>maix::comm</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/sipeed/MaixCDK/blob/main/docs/api/maix/comm.md" target="_blank">
                                    Edit this page
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <p>maix.comm module</p>
<blockquote>
<p>This is <code>maix::comm</code> module of <a href="https://github.com/sipeed/MaixCDK"  target="_blank">MaixCDK</a>.<br />
All of these elements are in namespace <code>maix::comm</code>.</p>
<p>For MaixCDK developer: DO NOT edit this doc file manually, this doc is auto generated!</p>
</blockquote>
<h2 id="Module">Module</h2>
<table>
<thead>
<tr>
  <th>module</th>
  <th>brief</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="./comm/modbus.html"  >modbus</a></td>
  <td>maix.comm.modbus module</td>
</tr>
</tbody>
</table>
<h2 id="Enum">Enum</h2>
<h2 id="Variable">Variable</h2>
<h2 id="Function">Function</h2>
<h3 id="add_default_comm_listener">add_default_comm_listener</h3>
<p>Add default CommProtocol listener.\nWhen the application uses this port, the listening thread will immediately\nrelease the port resources and exit. If you need to start the default listening thread again,\nplease release the default port resources and then call this function.</p>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">void add_default_comm_listener()
</code></pre>
</blockquote>
<h3 id="rm_default_comm_listener">rm_default_comm_listener</h3>
<p>Remove default CommProtocol listener.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>return</strong></td>
  <td>bool type.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">bool rm_default_comm_listener()
</code></pre>
</blockquote>
<h2 id="Class">Class</h2>
<h3 id="CommProtocol">CommProtocol</h3>
<p>Class for communication protocol</p>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">class CommProtocol
</code></pre>
</blockquote>
<h4 id="CommProtocol-2">CommProtocol</h4>
<p>Construct a new CommProtocol object</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>buff_size</strong>: buffer size, default to 1024 bytes<br><strong>header</strong>: Customize header, default is maix.protocol.HEADER<br><strong>method_none_raise</strong>: If method set to &quot;none&quot;, raise err.Exception() if method_none_raise is true. Default false,<br>if method is &quot;none&quot; and this arg is false, valid() function will return false and get_msg() always return none.<br></td>
</tr>
<tr>
  <td><strong>throw</strong></td>
  <td>Initialize failed will raise err::Exception()</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">CommProtocol(int buff_size = 1024, uint32_t header=maix::protocol::HEADER, bool method_none_raise = false)
</code></pre>
</blockquote>
<h4 id="get_msg">get_msg</h4>
<p>Read data to buffer, and try to decode it as maix.protocol.MSG object</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>timeout</strong>: unit ms, 0 means return immediatly, -1 means block util have msg, &gt;0 means block until have msg or timeout.<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>decoded data, if nullptr, means no valid frame found.<br>Attentioin, delete it after use in C++.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">protocol::MSG *get_msg(int timeout = 0)
</code></pre>
</blockquote>
<h4 id="resp_ok">resp_ok</h4>
<p>Send response ok(success) message</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>buff</strong>: output buffer<br><strong>buff_len</strong>: output buffer length<br><strong>cmd</strong>: CMD value<br><strong>body</strong>: response body, can be null<br><strong>body_len</strong>: response body length, can be 0<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>send response error code, maix.err.Err type</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err resp_ok(uint8_t *buff, int buff_len, uint8_t cmd, uint8_t *body = nullptr, int body_len = 0)
</code></pre>
</blockquote>
<h4 id="resp_ok (overload 1)">resp_ok (overload 1)</h4>
<p>Send response ok(success) message</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>cmd</strong>: CMD value<br><strong>body</strong>: response body, can be null<br><strong>body_len</strong>: response body length, can be 0<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>encoded data, if nullptr, means error, and the error code is -err.Err.<br>Attentioin, delete it after use in C++.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err resp_ok(uint8_t cmd, uint8_t *body = nullptr, int body_len = 0)
</code></pre>
</blockquote>
<h4 id="resp_ok (overload 2)">resp_ok (overload 2)</h4>
<p>Send response ok(success) message</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>cmd</strong>: CMD value<br><strong>body</strong>: response body, can be null<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>encoded data, if nullptr, means error, and the error code is -err.Err.<br>Attentioin, delete it after use in C++.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err resp_ok(uint8_t cmd, Bytes *body = nullptr)
</code></pre>
</blockquote>
<h4 id="report">report</h4>
<p>Send report message</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>buff</strong>: output buffer<br><strong>buff_len</strong>: output buffer length<br><strong>cmd</strong>: CMD value<br><strong>body</strong>: report body, can be null<br><strong>body_len</strong>: report body length, can be 0<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>send report error code, maix.err.Err type</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err report(uint8_t *buff, int buff_len, uint8_t cmd, uint8_t *body = nullptr, int body_len = 0)
</code></pre>
</blockquote>
<h4 id="report (overload 1)">report (overload 1)</h4>
<p>Send report message</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>cmd</strong>: CMD value<br><strong>body</strong>: report body, can be null<br><strong>body_len</strong>: report body length, can be 0<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>encoded data, if nullptr, means error, and the error code is -err.Err.<br>Attentioin, delete it after use in C++.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err report(uint8_t cmd, uint8_t *body = nullptr, int body_len = 0)
</code></pre>
</blockquote>
<h4 id="report (overload 2)">report (overload 2)</h4>
<p>Send report message</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>cmd</strong>: CMD value<br><strong>body</strong>: report body, can be null<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>encoded data, if nullptr, means error, and the error code is -err.Err.<br>Attentioin, delete it after use in C++.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err report(uint8_t cmd, Bytes *body = nullptr)
</code></pre>
</blockquote>
<h4 id="resp_err">resp_err</h4>
<p>Encode response error message to buffer</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>buff</strong>: output buffer<br><strong>buff_len</strong>: output buffer length<br><strong>cmd</strong>: CMD value<br><strong>code</strong>: error code<br><strong>msg</strong>: error message<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>send response error code, maix.err.Err type</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err resp_err(uint8_t *buff, int buff_len, uint8_t cmd, err::Err code, const std::string &amp;msg)
</code></pre>
</blockquote>
<h4 id="resp_err (overload 1)">resp_err (overload 1)</h4>
<p>Encode response error message to buffer</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>cmd</strong>: CMD value<br><strong>code</strong>: error code<br><strong>msg</strong>: error message<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>encoded data, if nullptr, means error, and the error code is -err.Err.<br>Attentioin, delete it after use in C++.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">err::Err resp_err(uint8_t cmd, err::Err code, const std::string &amp;msg)
</code></pre>
</blockquote>
<h4 id="valid">valid</h4>
<p>Is CommProtocol valid, only not valid when method not set to &quot;none&quot;.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>false if commprotocol method is &quot;none&quot;.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">bool valid()
</code></pre>
</blockquote>
<h4 id="set_method">set_method</h4>
<p>Set CommProtocol method. Static method, can be called directly without instance.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>method</strong>: Can be &quot;uart&quot; or &quot;none&quot;, &quot;none&quot; means not use CommProtocol.<br></td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>True</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">static err::Err set_method(const std::string &amp;method)
</code></pre>
</blockquote>
<h4 id="get_method">get_method</h4>
<p>Get CommProtocol method. Static method, can be called directly without instance.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>method Can be &quot;uart&quot; or &quot;none&quot;, &quot;none&quot; means not use CommProtocol.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>True</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">static std::string get_method()
</code></pre>
</blockquote>
<h4 id="get_uart_port">get_uart_port</h4>
<p>Get CommProtocol method uart's port name. Static method, can be called directly without instance.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>uart [port name, device path], e.g. [&quot;uart0&quot;, &quot;/dev/ttyS0&quot;].<br>If no valid uart port, return empty list !!</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>True</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">static std::vector&lt;std::string&gt; get_uart_port()
</code></pre>
</blockquote>
<h4 id="get_uart_ports">get_uart_ports</h4>
<p>Get all CommProtocol method uart supported ports. Static method, can be called directly without instance.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>uart [[port name, device path]], e.g. [[&quot;uart0&quot;, &quot;/dev/ttyS0&quot;], ...].</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>True</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">static std::vector&lt;std::vector&lt;std::string&gt;&gt; get_uart_ports()
</code></pre>
</blockquote>
<h3 id="CommBase">CommBase</h3>
<p>Communication base class, all communication methods should implement this interface</p>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">class CommBase
</code></pre>
</blockquote>
<h4 id="open">open</h4>
<p>Open device, if already opened, do nothing and return err.ERR_NONE.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>open device error code, err.Err type.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">virtual err::Err open()
</code></pre>
</blockquote>
<h4 id="close">close</h4>
<p>Close device, if already closed, do nothing and return err.ERR_NONE.</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>close device error code, err.Err type.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">virtual err::Err close()
</code></pre>
</blockquote>
<h4 id="is_open">is_open</h4>
<p>Check if opened</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>true if opened, else false.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">virtual bool is_open()
</code></pre>
</blockquote>
<h4 id="write">write</h4>
<p>Send data to device</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>buff</strong>: data buffer<br><strong>len</strong>: data length need to send, the len must &lt;= buff length.<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>sent data length, &lt; 0 means error, value is -err.Err.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">virtual int write(const uint8_t *buff, int len)
</code></pre>
</blockquote>
<h4 id="write (overload 1)">write (overload 1)</h4>
<p>Send data to uart</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>data</strong>: direction [in], data to send, bytes type. If you want to send str type, use str.encode() to convert.<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>sent length, int type, if &lt; 0 means error, value is -err.Err.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">virtual int write(Bytes &amp;data)
</code></pre>
</blockquote>
<h4 id="read">read</h4>
<p>Receive data</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>buff</strong>: data buffer to store received data<br><strong>buff_len</strong>: data buffer length<br><strong>recv_len</strong>: max data length want to receive, default -1.<br>-1 means read data in uart receive buffer.<br>&gt;0 means read recv_len data want to receive.<br>other values is invalid.<br><strong>timeout</strong>: unit ms, timeout to receive data, default 0.<br>0 means read data in uart receive buffer and return immediately,<br>-1 means block until read recv_len data,<br>&gt;0 means block until read recv_len data or timeout.<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>received data length, &lt; 0 means error, value is -err.Err.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">virtual int read(uint8_t *buff, int buff_len, int recv_len, int timeout)
</code></pre>
</blockquote>
<h4 id="read (overload 1)">read (overload 1)</h4>
<p>Recv data from uart</p>
<table>
<thead>
<tr>
  <th>item</th>
  <th>description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>type</strong></td>
  <td>func</td>
</tr>
<tr>
  <td><strong>param</strong></td>
  <td><strong>len</strong>: max data length want to receive, default -1.<br>-1 means read data in uart receive buffer.<br>&gt;0 means read len data want to receive.<br>other values is invalid.<br><strong>timeout</strong>: unit ms, timeout to receive data, default 0.<br>0 means read data in uart receive buffer and return immediately,<br>-1 means block until read len data,<br>&gt;0 means block until read len data or timeout.<br></td>
</tr>
<tr>
  <td><strong>return</strong></td>
  <td>received data, bytes type.</td>
</tr>
<tr>
  <td><strong>static</strong></td>
  <td>False</td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++ defination code:</p>

<pre class="language-cpp"><code class="language-cpp">virtual Bytes *read(int len, int timeout)
</code></pre>
</blockquote>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/maixcdk/api/maix/network/wifi.html">
                            <span class="icon"></span>
                            <span class="label">wifi</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/maixcdk/api/maix/comm/modbus.html">
                            <span class="label">modbus</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>Links</a><ul><li><a target="_blank" href="https://wiki.sipeed.com">Sipeed Wiki</a></li>
<li><a target="_blank" href="https://www.sipeed.com">Sipeed Official</a></li>
<li><a target="_blank" href="https://maixhub.com/">MaixHub</a></li>
<li><a  href="/maixcdk/sitemap.xml">Site map</a></li>
<li><a target="_blank" href="https://github.com/neutree/teedoc">Generated by teedoc</a></li>
</ul>
</li>
<li><a>Source code</a><ul><li><a target="_blank" href="https://github.com/sipeed/maixpy">MaixPy source code</a></li>
<li><a target="_blank" href="https://github.com/sipeed/MaixCDK">MaixCDK source code</a></li>
<li><a target="_blank" href="https://github.com/sipeed/sipeed_wiki">Wiki source code</a></li>
<li><a target="_blank" href="https://github.com/sipeed">Open source projects</a></li>
</ul>
</li>
<li><a>Follow us</a><ul><li><a target="_blank" href="https://twitter.com/SipeedIO">twitter</a></li>
<li><a target="_blank" href="https://sipeed.taobao.com/">Taobao</a></li>
<li><a target="_blank" href="https://www.aliexpress.com/store/911876460">AliExpress</a></li>
<li><a target="_blank" href="https://github.com/sipeed">github</a></li>
<li><a><a>Wechat </a><img src='https://wiki.sipeed.com/static/image/wechat.png'></a>
</li>
</ul>
</li>
<li><a>Contact us</a><ul><li><a>Tel: +86 0755-27808509</a>
</li>
<li><a>Bussiness: support@sipeed.com</a>
</li>
<li><a>Addr: 深圳市宝安区新湖路4008号蘅芳科技办公大厦A座-2101C</a>
</li>
<li><a  href="https://wiki.sipeed.com/join_us.html">Join us</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://www.sipeed.com">©2018-2023 深圳矽速科技有限公司</a></li>
<li><a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">粤ICP备19015433号</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/maixcdk/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script src="/maixcdk/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/maixcdk/static/js/theme_default/main.js"></script>
    
        <script src="/maixcdk/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/maixcdk/static/css/theme_default/prism.min.js"></script>
    
        <script src="/maixcdk/static/js/search/search_main.js"></script>
    
        <script src="/maixcdk/static/js/custom.js"></script>
    
        <script src="/maixcdk/static/js/thumbs_up/main.js"></script>
    
</body>

</html>